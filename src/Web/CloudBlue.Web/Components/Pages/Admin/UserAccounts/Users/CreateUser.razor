@page "/users/create"
@using CloudBlue.Domain.DomainModels.Users.UsersManagement

<PageTitle>Create User</PageTitle>

<Spinners></Spinners>
    <RadzenColumn SizeMD=12>
    <RadzenTemplateForm TItem="CreateUserModel" Data="@_model" Submit="@FormSubmit">


        <RadzenFieldset AllowCollapse="false">

          
            <ChildContent>
                <RadzenRow  JustifyContent="JustifyContent.Center" lignItems="AlignItems.Center">
                    <RadzenColumn Size="12"  SizeMD="6">
                        <RadzenFormField Text="Full Name" Variant="Variant.Outlined" Style="width: 100%;">
                               <Start>

                        <RadzenIcon class="requiredIcon" />
                             

                    </Start>
                    <ChildContent>
                 
                            <RadzenTextBox style="display: block; width: 100%" @bind-Value="@_model.FullName" Name="FullName" />
                            <RadzenDataAnnotationValidator Popup="true" Style="position: absolute" Component="FullName" ComponentProperty="Value" />
                            </ChildContent>
                        </RadzenFormField>

            
                    </RadzenColumn>
                    <RadzenColumn Size="12" SizeMD="6">
                        <RadzenFormField Text="Password" Variant="Variant.Outlined" Style="width: 100%;">
                               <Start>

                        <RadzenIcon class="requiredIcon" />
                             

                    </Start>
                    <ChildContent>
                 
                            <RadzenTextBox style="display: block; width: 100%" @bind-Value="@_model.Password" Name="Password" />
                            <RadzenDataAnnotationValidator Popup="true" Style="position: absolute" Component="Password" ComponentProperty="Value" />
                            </ChildContent>
                        </RadzenFormField>


                    </RadzenColumn>

                </RadzenRow>

                <RadzenRow JustifyContent="JustifyContent.Center" lignItems="AlignItems.Center">
                    <RadzenColumn Size="12" SizeMD="6">
                        <RadzenFormField Text="UserName" Variant="Variant.Outlined" Style="width: 100%;">
                               <Start>

                        <RadzenIcon class="requiredIcon" />
                             

                    </Start>
                    <ChildContent>
                 
                            <RadzenTextBox style="display: block; width: 100%" @bind-Value="@_model.Username" Name="UserName" />
                            <RadzenDataAnnotationValidator Popup="true" Style="position: absolute" Component="UserName" ComponentProperty="Value" />
                            </ChildContent>
                        </RadzenFormField>


                    </RadzenColumn>
                    <RadzenColumn Size="12" SizeMD="6">
                        <RadzenFormField Text="Email" Variant="Variant.Outlined" Style="width: 100%;">
                               <Start>

                        <RadzenIcon class="requiredIcon" />
                             

                    </Start>
                    <ChildContent>
                 
                            <RadzenTextBox style="display: block; width: 100%" @bind-Value="@_model.Email" Name="Email" />
                            <RadzenDataAnnotationValidator Popup="true" Style="position: absolute" Component="Email" ComponentProperty="Value" />
                            </ChildContent>
                        </RadzenFormField>


                    </RadzenColumn>

                </RadzenRow>
                <RadzenRow JustifyContent="JustifyContent.Center">
                    
                       
                    <RadzenColumn Size="12" SizeMD="3">

                        <RadzenFormField Text="Area Code" Variant="Variant.Outlined">
                              <Start>

                        <RadzenIcon class="requiredIcon" />
                             

                    </Start>
                    <ChildContent>
                 
                            <RadzenTextBox MaxLength="4" Name="AreaCode" @bind-Value="@_model.UserPhone.AreaCode"  
                                             />
                            <RadzenDataAnnotationValidator Popup="true" Style="position: absolute" Component="AreaCode" />

</ChildContent>
                        </RadzenFormField>
                    </RadzenColumn>
                    <RadzenColumn Size="12" SizeMD="3">

                        <RadzenFormField Text="Phone" Variant="Variant.Outlined">
                               <Start>

                        <RadzenIcon class="requiredIcon" />
                             

                    </Start>
                    <ChildContent>
                 
                            <RadzenTextBox Name="Phone" MaxLength="8" @bind-Value="@_model.UserPhone.Phone"  />
                            <RadzenDataAnnotationValidator Popup="true" Style="position: absolute" Component="Phone"/>
</ChildContent>
                        </RadzenFormField>
                    </RadzenColumn>


                    <RadzenColumn Size="12" SizeMD="6">

                        <RadzenFormField Text="Hiring Date" Variant="Variant.Outlined">
                               <Start>

                        <RadzenIcon class="requiredIcon" />
                             

                    </Start>
                    <ChildContent>
                 
                            <RadzenDatePicker AllowClear="true" AllowInput="false" DateFormat="dd/MM/yyyy" Name="HireDate" @bind-Value="@_model.HireDate"/>
                            <RadzenDataAnnotationValidator Popup="true" Style="position: absolute" Component="HireDate"/>
                            </ChildContent>
                        </RadzenFormField>
                    </RadzenColumn>

                </RadzenRow>

                <RadzenRow JustifyContent="JustifyContent.Center" lignItems="AlignItems.Center">
                    <RadzenColumn Size="12" SizeMD="6">
                        <RadzenFormField Text="Company" Variant="Variant.Outlined" Style="width: 100%;">
                               <Start>

                        <RadzenIcon class="requiredIcon" />
                             

                    </Start>
                    <ChildContent>
                 
                            <RadzenDropDown AllowClear="true" Change="CompanyChanged"
                                            Name="CompanyId" @bind-Value="@_model.CompanyId" Data="@_companies" TextProperty="ItemName" ValueProperty="ItemId" AllowFiltering="true" FilterCaseSensitivity="FilterCaseSensitivity.CaseInsensitive" Placeholder="Select Company" Style="width: 100%;"/>
                            <RadzenDataAnnotationValidator Popup="true" Style="position: absolute" Component="CompanyId"/>
                            </ChildContent>
                        </RadzenFormField>
                    </RadzenColumn>

                    <RadzenColumn Size="12" SizeMD="6">
                        <RadzenFormField Text="Branch" Variant="Variant.Outlined" Style="width: 100%;">
                               <Start>

                        <RadzenIcon class="requiredIcon" />
                             

                    </Start>
                    <ChildContent>
                 
                            <RadzenDropDown AllowClear="true" Change="PopulateTopManagers" Name="BranchId" @bind-Value="@_model.BranchId" Data="@_branches" TextProperty="ItemName" ValueProperty="ItemId" AllowFiltering="true" FilterCaseSensitivity="FilterCaseSensitivity.CaseInsensitive" Placeholder="Select Branch" Style="width: 100%;" />
                            <RadzenDataAnnotationValidator Popup="true" Style="position: absolute" Component="BranchId" />
                            </ChildContent>
                        </RadzenFormField>
                    </RadzenColumn>
                </RadzenRow>
                
                <RadzenRow JustifyContent="JustifyContent.Center" lignItems="AlignItems.Center">
                    <RadzenColumn Size="12" SizeMD="6">
                        <RadzenFormField Text="Department" Variant="Variant.Outlined" Style="width: 100%;">
                               <Start>

                        <RadzenIcon class="requiredIcon" />
                             

                    </Start>
                    <ChildContent>
                 
                            <RadzenDropDown AllowClear="true" Name="DepartmentId" @bind-Value="@_model.DepartmentId" Data="@_departments" Change="DepartmentChanged" TextProperty="ItemName" ValueProperty="ItemId" AllowFiltering="true" FilterCaseSensitivity="FilterCaseSensitivity.CaseInsensitive" Placeholder="Select Department" Style="width: 100%;" />
                            <RadzenDataAnnotationValidator Popup="true" Style="position: absolute" Component="DepartmentId" />
                            </ChildContent>

                        </RadzenFormField>


                    </RadzenColumn>
                    <RadzenColumn Size="12" SizeMD="6">
                        <RadzenFormField Text="Position" Variant="Variant.Outlined" Style="width: 100%;">
                               <Start>

                        <RadzenIcon class="requiredIcon" />
                             

                    </Start>
                    <ChildContent>
                 
                            <RadzenDropDown AllowClear="true" Name="PositionId" @bind-Value="@_model.PositionId" Data="@_userPositions" TextProperty="ItemName" ValueProperty="ItemId" AllowFiltering="true" FilterCaseSensitivity="FilterCaseSensitivity.CaseInsensitive" Placeholder="Select Position" Style="width: 100%;" />
                            <RadzenDataAnnotationValidator Popup="true" Style="position: absolute" Component="PositionId" />
                            </ChildContent>

                        </RadzenFormField>


                    </RadzenColumn>
                    
                </RadzenRow>
              
                <RadzenRow JustifyContent="JustifyContent.Center" Visible="_isSalesUser" lignItems="AlignItems.Center">
                    <RadzenColumn Size="12"   SizeMD="6">
                        <RadzenFormField Text="In Resale Team" Variant="Variant.Outlined" Style="width: 100%;">
                               <Start>

                        <RadzenIcon class="requiredIcon" />
                             

                    </Start>
                    <ChildContent>
                 
                            <RadzenDropDown AllowClear="true" Name="InResaleTeamId" @bind-Value="@_model.InResaleTeamId" Data="@_yesNoList" TextProperty="ItemName" ValueProperty="ItemId" Placeholder="Select One" Style="width: 100%;" />
                            <RadzenDataAnnotationValidator Popup="true" Style="position: absolute" Component="InResaleTeamId" ComponentProperty="Value" />
                            </ChildContent>
                        </RadzenFormField>


                    </RadzenColumn>
                       <RadzenColumn Size="12"   SizeMD="6">
                        <RadzenFormField Text="Direct Manager" Variant="Variant.Outlined" Style="width: 100%;">
                               <Start>

                        <RadzenIcon class="requiredIcon" />
                             

                    </Start>
                    <ChildContent>
                 
                            <RadzenDropDown AllowClear="true" Name="DirectManagerId" @bind-Value="@_model.DirectManagerId" Data="@_managers" TextProperty="ItemName" ValueProperty="ItemId" Placeholder="Select One" Style="width: 100%;" />
                            <RadzenDataAnnotationValidator Popup="true" Style="position: absolute" Component="DirectManagerId" ComponentProperty="Value" />
                            </ChildContent>
                        </RadzenFormField>


                    </RadzenColumn>
                
                </RadzenRow>

                <RadzenRow JustifyContent="JustifyContent.Center" Visible="_isSalesUser" lignItems="AlignItems.Center">
                    <RadzenColumn Size="12" SizeMD="6">
                        <RadzenFormField Text="Access CloudBlue Portal" Variant="Variant.Outlined" Style="width: 100%;">
                            <Start>

                                <RadzenIcon class="requiredIcon" />


                            </Start>
                            <ChildContent>

                                <RadzenDropDown AllowClear="true" Name="CanUserAccessPortal" @bind-Value="@_model.CanUserAccessPortal" Data="@_yesNoList" TextProperty="ItemName" ValueProperty="ItemId" Placeholder="Select One" Style="width: 100%;" />
                                <RadzenDataAnnotationValidator Popup="true" Style="position: absolute" Component="CanUserAccessPortal" ComponentProperty="Value" />
                            </ChildContent>
                        </RadzenFormField>


                    </RadzenColumn>
                    <RadzenColumn Size="12" SizeMD="6">
                        <RadzenFormField Text="CanAccess Commission System" Variant="Variant.Outlined" Style="width: 100%;">
                            <Start>

                                <RadzenIcon class="requiredIcon" />


                            </Start>
                            <ChildContent>

                                <RadzenDropDown AllowClear="true" Name="CanAccessCommissionSystem" @bind-Value="@_model.CanAccessCommissionSystem" Data="@_yesNoList" TextProperty="ItemName" ValueProperty="ItemId" Placeholder="Select One" Style="width: 100%;" />
                                <RadzenDataAnnotationValidator Popup="true" Style="position: absolute" Component="CanAccessCommissionSystem" ComponentProperty="Value" />
                            </ChildContent>
                        </RadzenFormField>


                    </RadzenColumn>

                </RadzenRow>

                   
            </ChildContent>
        </RadzenFieldset>
        <RadzenStack style="margin-top:1rem;" Orientation="Orientation.Horizontal" AlignItems="AlignItems.Center" JustifyContent="JustifyContent.End" Gap="0.5rem">
            <RadzenButton Disabled="_submitDisabled" ButtonStyle="ButtonStyle.Primary" ButtonType="ButtonType.Submit" Icon="save" Text="Save" Variant="Variant.Flat" />
            <RadzenButton ButtonStyle="ButtonStyle.Light" Text="Close" Variant="Variant.Flat" Click="@CancelButtonClick" />
        </RadzenStack>
    </RadzenTemplateForm>
    </RadzenColumn>

     